(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12459,e=>{"use strict";let t,r,a;var n=e.i(43476),l=e.i(71645),s=e.i(55436),o=e.i(93479),i=e.i(48148);function d(){let e=(0,i.useTranslations)("GuestList");return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent",children:e("title")}),(0,n.jsx)("p",{className:"text-muted-foreground mt-1",children:e("subtitle")})]}),(0,n.jsx)("div",{className:"flex items-center gap-2"})]}),(0,n.jsx)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:(0,n.jsxs)("div",{className:"relative w-full md:w-96",children:[(0,n.jsx)(s.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,n.jsx)(o.Input,{placeholder:e("searchPlaceholder"),className:"pl-9 bg-white/5 border-white/10 focus:border-primary/50 transition-colors"})]})})]})}var c=e.i(15288),u=e.i(95468),m=e.i(8402),p=e.i(98962),f=e.i(61911);function h({stats:e,isLoading:t}){let r=(0,i.useTranslations)("GuestList");if(t)return(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)("div",{className:"h-28 rounded-xl bg-white/5 animate-pulse"},t))});let a=e||{totalInvited:0,checkedIn:0,invited:0,noShows:0,noShowRate:0,capacity:0},l=[{label:r("totalGuestsStat"),value:a.totalInvited.toLocaleString(),subValue:`${r("capacity")}: ${a.capacity.toLocaleString()}`,icon:f.Users,color:"text-blue-600",bg:"bg-blue-50",gradient:"from-blue-500 to-indigo-600"},{label:r("checkedInStat"),value:a.checkedIn.toLocaleString(),subValue:`${a.totalInvited>0?Math.round(a.checkedIn/a.totalInvited*100):0}% ${r("arrival")}`,icon:u.CheckCircle2,color:"text-emerald-600",bg:"bg-emerald-50",gradient:"from-emerald-500 to-teal-600"},{label:r("invitedStat"),value:a.invited.toLocaleString(),subValue:r("pendingArrival"),icon:m.Ticket,color:"text-purple-600",bg:"bg-purple-50",gradient:"from-violet-500 to-purple-600"},{label:r("noShowsStat"),value:a.noShows.toString(),subValue:`${a.noShowRate}% ${r("rate")}`,icon:p.UserX,color:"text-rose-600",bg:"bg-rose-50",gradient:"from-rose-500 to-pink-600"}];return(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:l.map(e=>(0,n.jsxs)(c.Card,{className:"relative overflow-hidden border-none shadow-lg hover:shadow-xl transition-all duration-300 group bg-white/80 backdrop-blur-sm dark:bg-zinc-900/80",children:[(0,n.jsx)("div",{className:`absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity ${e.color}`,children:(0,n.jsx)(e.icon,{className:"w-24 h-24 transform translate-x-4 -translate-y-4"})}),(0,n.jsxs)("div",{className:"px-5 pt-5 pb-5 relative z-10",children:[(0,n.jsx)("div",{className:`w-10 h-10 rounded-2xl shadow-sm ${e.bg} flex items-center justify-center mb-3`,children:(0,n.jsx)(e.icon,{className:`w-5 h-5 ${e.color}`})}),(0,n.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1 uppercase tracking-wide",children:e.label}),(0,n.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,n.jsx)("h3",{className:"text-2xl font-bold tracking-tight text-foreground",children:e.value}),(0,n.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:e.subValue})]})]}),(0,n.jsx)("div",{className:`h-1 w-full absolute bottom-0 bg-gradient-to-r opacity-80 ${e.gradient}`})]},e.label))})}var x=e.i(99676),g=e.i(87486),v=e.i(19455),b=e.i(73488),b=b,w=e.i(78745),w=w,j=e.i(75254);let y=(0,j.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var N=e.i(40056),k=e.i(61745),C=e.i(55146),S=e.i(77241),R=e.i(55545),E=e.i(55024),D=e.i(99151),I=e.i(45110),M=e.i(81092);function P(e,t){let r=(0,M.toDate)(e)-(0,M.toDate)(t);return r<0?-1:r>0?1:r}var A=e.i(34662),_=e.i(20062),z=e.i(45963),O=e.i(39978);function T({guests:e,isLoading:t,onApprove:r,onDeny:a,onCancel:l,showActions:s=!0,emptyTitle:o,emptyDescription:d}){let u=(0,i.useTranslations)("GuestList"),p=(0,k.useLocale)();return t?(0,n.jsx)("div",{className:"h-96 rounded-[32px] bg-white/5 dark:bg-zinc-900/10 animate-pulse border border-border"}):0===e.length?(0,n.jsxs)(c.Card,{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-sm rounded-[32px] border-none shadow-xl overflow-hidden p-12 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)(m.Ticket,{className:"w-12 h-12 text-muted-foreground mt-6 opacity-50"}),(0,n.jsx)("h3",{className:"text-xl font-bold text-foreground",children:o||u("noRequests")}),(0,n.jsx)("p",{className:"text-muted-foreground mb-6",children:d||u("noRequestsDesc")})]}):(0,n.jsx)(c.Card,{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-sm rounded-[32px] border-none shadow-xl overflow-hidden",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-border/50 bg-muted/30",children:[(0,n.jsx)("th",{className:"h-14 px-8 text-left align-middle font-black text-muted-foreground uppercase text-[10px] tracking-[0.2em]",children:u("guest")}),(0,n.jsx)("th",{className:"h-14 px-8 text-left align-middle font-black text-muted-foreground uppercase text-[10px] tracking-[0.2em]",children:u("status")}),(0,n.jsx)("th",{className:"h-14 px-8 text-left align-middle font-black text-muted-foreground uppercase text-[10px] tracking-[0.2em]",children:u("gender")}),(0,n.jsx)("th",{className:"h-14 px-8 text-left align-middle font-black text-muted-foreground uppercase text-[10px] tracking-[0.2em]",children:u("requested")}),(s||l)&&(0,n.jsx)("th",{className:"h-14 px-8 text-right align-middle font-black text-muted-foreground uppercase text-[10px] tracking-[0.2em]",children:u("actions")})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-border/50",children:e.map(e=>{var t,o;let i=e.user,d=(i.first_name?.[0]||"")+(i.last_name?.[0]||"")||"GU",c=`${i.first_name||""} ${i.last_name||""}`.trim(),m=i.gender?.name,f="object"==typeof m&&null!==m?m[p]||m.en||"Unknown":m||"Unknown",h=f.toLowerCase().includes("female")||f.toLowerCase().includes("kadÄ±n");return(0,n.jsxs)("tr",{className:"group hover:bg-primary/[0.02] dark:hover:bg-primary/[0.05] transition-all duration-300",children:[(0,n.jsx)("td",{className:"p-8 align-middle",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(x.Avatar,{className:"h-11 w-11 rounded-2xl border-2 border-white dark:border-zinc-800 shadow-sm",children:[(0,n.jsx)(x.AvatarImage,{src:i.photo_urls?.[0]}),(0,n.jsx)(x.AvatarFallback,{className:"bg-zinc-100 dark:bg-zinc-800 text-xs font-black text-zinc-500 dark:text-zinc-400",children:d})]}),(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("span",{className:"font-bold text-foreground group-hover:text-primary transition-colors",children:c})})]})}),(0,n.jsx)("td",{className:"p-8 align-middle",children:(0,n.jsx)(g.Badge,{variant:"outline",className:(0,N.cn)("rounded-xl px-3 py-1 font-black text-[9px] uppercase tracking-widest border-none shadow-sm",(e=>{switch(e){case"approved":return"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400 border-emerald-500/20";case"confirmed":return"bg-blue-500/15 text-blue-600 dark:text-blue-400 border-blue-500/20";case"pending":return"bg-amber-500/15 text-amber-600 dark:text-amber-400 border-amber-500/20";case"cancelled":case"cancelled_by_venue":case"cancelled_by_user":return"bg-rose-500/15 text-rose-600 dark:text-rose-400 border-rose-500/20";default:return"bg-zinc-500/15 text-zinc-600 dark:text-zinc-400 border-zinc-500/20"}})(e.status)),children:e.status.replace(/_/g," ")})}),(0,n.jsx)("td",{className:"p-8 align-middle",children:(0,n.jsx)("span",{className:(0,N.cn)("text-[10px] font-black uppercase tracking-widest px-3 py-1.5 rounded-xl border shadow-sm",h?"border-pink-500/20 bg-pink-500/10 text-pink-500 dark:text-pink-400":"border-blue-500/20 bg-blue-500/10 text-blue-500 dark:text-blue-400"),children:f})}),(0,n.jsx)("td",{className:"p-8 align-middle text-sm font-bold text-muted-foreground",children:(t=new Date(e.created_at),o={addSuffix:!0},function(e,t,r){var a;let n,l=(0,E.getDefaultOptions)(),s=r?.locale??l.locale??R.defaultLocale,o=P(e,t);if(isNaN(o))throw RangeError("Invalid time value");let i=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:o}),[d,c]=(0,I.normalizeDates)(r?.in,...o>0?[t,e]:[e,t]),u=(a=void 0,e=>{let t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(((0,M.toDate)(c)-(0,M.toDate)(d))/1e3),m=Math.round((u-((0,D.getTimezoneOffsetInMilliseconds)(c)-(0,D.getTimezoneOffsetInMilliseconds)(d))/1e3)/60);if(m<2)if(r?.includeSeconds)if(u<5)return s.formatDistance("lessThanXSeconds",5,i);else if(u<10)return s.formatDistance("lessThanXSeconds",10,i);else if(u<20)return s.formatDistance("lessThanXSeconds",20,i);else if(u<40)return s.formatDistance("halfAMinute",0,i);else if(u<60)return s.formatDistance("lessThanXMinutes",1,i);else return s.formatDistance("xMinutes",1,i);else if(0===m)return s.formatDistance("lessThanXMinutes",1,i);else return s.formatDistance("xMinutes",m,i);if(m<45)return s.formatDistance("xMinutes",m,i);if(m<90)return s.formatDistance("aboutXHours",1,i);if(m<A.minutesInDay){let e=Math.round(m/60);return s.formatDistance("aboutXHours",e,i)}if(m<2520)return s.formatDistance("xDays",1,i);else if(m<A.minutesInMonth){let e=Math.round(m/A.minutesInDay);return s.formatDistance("xDays",e,i)}else if(m<2*A.minutesInMonth)return n=Math.round(m/A.minutesInMonth),s.formatDistance("aboutXMonths",n,i);if((n=function(e,t,r){let a,[n,l,s]=(0,I.normalizeDates)(void 0,e,e,t),o=P(l,s),i=Math.abs((0,_.differenceInCalendarMonths)(l,s));if(i<1)return 0;1===l.getMonth()&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-o*i);let d=P(l,s)===-o;a=(0,M.toDate)(n,void 0),+(0,z.endOfDay)(a,void 0)==+(0,O.endOfMonth)(a,void 0)&&1===i&&1===P(n,s)&&(d=!1);let c=o*(i-d);return 0===c?0:c}(c,d))<12){let e=Math.round(m/A.minutesInMonth);return s.formatDistance("xMonths",e,i)}{let e=n%12,t=Math.trunc(n/12);return e<3?s.formatDistance("aboutXYears",t,i):e<9?s.formatDistance("overXYears",t,i):s.formatDistance("almostXYears",t+1,i)}}(t,(0,S.constructFrom)(t,Date.now()),o))}),s&&(0,n.jsx)("td",{className:"p-8 align-middle text-right",children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,n.jsxs)(v.Button,{size:"sm",onClick:()=>r(e.id),className:"bg-emerald-500/15 text-emerald-600 hover:bg-emerald-500/25 border-none shadow-sm gap-1.5 rounded-xl text-xs font-bold",variant:"outline",children:[(0,n.jsx)(w.default,{className:"w-3.5 h-3.5"}),u("approve")]}),(0,n.jsxs)(v.Button,{size:"sm",onClick:()=>a(e.id),className:"bg-rose-500/15 text-rose-600 hover:bg-rose-500/25 border-none shadow-sm gap-1.5 rounded-xl text-xs font-bold",variant:"outline",children:[(0,n.jsx)(y,{className:"w-3.5 h-3.5"}),u("deny")]})]})}),!s&&l&&(0,n.jsx)("td",{className:"p-8 align-middle text-right",children:(0,n.jsxs)(C.DropdownMenu,{children:[(0,n.jsx)(C.DropdownMenuTrigger,{asChild:!0,children:(0,n.jsx)(v.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg",children:(0,n.jsx)(b.default,{className:"h-4 w-4"})})}),(0,n.jsx)(C.DropdownMenuContent,{align:"end",className:"rounded-xl",children:(0,n.jsxs)(C.DropdownMenuItem,{onClick:()=>l(e.id),className:"text-rose-600 focus:text-rose-600 focus:bg-rose-50 dark:focus:bg-rose-900/20 gap-2 cursor-pointer",children:[(0,n.jsx)(y,{className:"w-4 h-4"}),u("cancelGuest")]})})]})})]},e.id)})})]})})})}var F=e.i(1851),L=e.i(87316),w=w;let $=(0,j.default)("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),q=(0,j.default)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);var G=e.i(27766),V=e.i(81140),B=e.i(20783),U=e.i(30030),X=e.i(26330),H=e.i(3536),K=e.i(65491),W=e.i(10772),Y=e.i(53660),Z=e.i(74606),J=e.i(96626),Q=e.i(48425),ee=Symbol("radix.slottable");function et(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ee}var er=e.i(69340),ea=e.i(86312),en=e.i(85369),el="Popover",[es,eo]=(0,U.createContextScope)(el,[Y.createPopperScope]),ei=(0,Y.createPopperScope)(),[ed,ec]=es(el),eu=e=>{let{__scopePopover:t,children:r,open:a,defaultOpen:s,onOpenChange:o,modal:i=!1}=e,d=ei(t),c=l.useRef(null),[u,m]=l.useState(!1),[p,f]=(0,er.useControllableState)({prop:a,defaultProp:s??!1,onChange:o,caller:el});return(0,n.jsx)(Y.Root,{...d,children:(0,n.jsx)(ed,{scope:t,contentId:(0,W.useId)(),triggerRef:c,open:p,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:u,onCustomAnchorAdd:l.useCallback(()=>m(!0),[]),onCustomAnchorRemove:l.useCallback(()=>m(!1),[]),modal:i,children:r})})};eu.displayName=el;var em="PopoverAnchor";l.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,s=ec(em,r),o=ei(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:d}=s;return l.useEffect(()=>(i(),()=>d()),[i,d]),(0,n.jsx)(Y.Anchor,{...o,...a,ref:t})}).displayName=em;var ep="PopoverTrigger",ef=l.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,l=ec(ep,r),s=ei(r),o=(0,B.useComposedRefs)(t,l.triggerRef),i=(0,n.jsx)(Q.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":eS(l.open),...a,ref:o,onClick:(0,V.composeEventHandlers)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?i:(0,n.jsx)(Y.Anchor,{asChild:!0,...s,children:i})});ef.displayName=ep;var eh="PopoverPortal",[ex,eg]=es(eh,{forceMount:void 0}),ev=e=>{let{__scopePopover:t,forceMount:r,children:a,container:l}=e,s=ec(eh,t);return(0,n.jsx)(ex,{scope:t,forceMount:r,children:(0,n.jsx)(J.Presence,{present:r||s.open,children:(0,n.jsx)(Z.Portal,{asChild:!0,container:l,children:a})})})};ev.displayName=eh;var eb="PopoverContent",ew=l.forwardRef((e,t)=>{let r=eg(eb,e.__scopePopover),{forceMount:a=r.forceMount,...l}=e,s=ec(eb,e.__scopePopover);return(0,n.jsx)(J.Presence,{present:a||s.open,children:s.modal?(0,n.jsx)(ey,{...l,ref:t}):(0,n.jsx)(eN,{...l,ref:t})})});ew.displayName=eb;var ej=((a=l.forwardRef((e,t)=>{let{children:r,...a}=e;if(l.isValidElement(r)){var n;let e,s,o=(n=r,(s=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(s=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),i=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==l.Fragment&&(i.ref=t?(0,B.composeRefs)(t,o):o),l.cloneElement(r,i)}return l.Children.count(r)>1?l.Children.only(null):null})).displayName="PopoverContent.RemoveScroll.SlotClone",t=a,(r=l.forwardRef((e,r)=>{let{children:a,...s}=e,o=l.Children.toArray(a),i=o.find(et);if(i){let e=i.props.children,a=o.map(t=>t!==i?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...s,ref:r,children:l.isValidElement(e)?l.cloneElement(e,void 0,a):null})}return(0,n.jsx)(t,{...s,ref:r,children:a})})).displayName="PopoverContent.RemoveScroll.Slot",r),ey=l.forwardRef((e,t)=>{let r=ec(eb,e.__scopePopover),a=l.useRef(null),s=(0,B.useComposedRefs)(t,a),o=l.useRef(!1);return l.useEffect(()=>{let e=a.current;if(e)return(0,ea.hideOthers)(e)},[]),(0,n.jsx)(en.RemoveScroll,{as:ej,allowPinchZoom:!0,children:(0,n.jsx)(ek,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,V.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,V.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;o.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,V.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),eN=l.forwardRef((e,t)=>{let r=ec(eb,e.__scopePopover),a=l.useRef(!1),s=l.useRef(!1);return(0,n.jsx)(ek,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||r.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));let n=t.target;r.triggerRef.current?.contains(n)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),ek=l.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...m}=e,p=ec(eb,r),f=ei(r);return(0,H.useFocusGuards)(),(0,n.jsx)(K.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:s,children:(0,n.jsx)(X.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:(0,n.jsx)(Y.Content,{"data-state":eS(p.open),role:"dialog",id:p.contentId,...f,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eC="PopoverClose";function eS(e){return e?"open":"closed"}l.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,l=ec(eC,r);return(0,n.jsx)(Q.Primitive.button,{type:"button",...a,ref:t,onClick:(0,V.composeEventHandlers)(e.onClick,()=>l.onOpenChange(!1))})}).displayName=eC,l.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,l=ei(r);return(0,n.jsx)(Y.Arrow,{...l,...a,ref:t})}).displayName="PopoverArrow";let eR=l.forwardRef(({className:e,align:t="center",sideOffset:r=4,...a},l)=>(0,n.jsx)(ev,{children:(0,n.jsx)(ew,{ref:l,align:t,sideOffset:r,className:(0,N.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));eR.displayName=ew.displayName;var eE=/[\\\/_+.#"@\[\(\{&]/,eD=/[\\\/_+.#"@\[\(\{&]/g,eI=/[\s-]/,eM=/[\s-]/g;function eP(e){return e.toLowerCase().replace(eM," ")}var eA=e.i(26999),e_='[cmdk-group=""]',ez='[cmdk-group-items=""]',eO='[cmdk-item=""]',eT=`${eO}:not([aria-disabled="true"])`,eF="cmdk-item-select",eL="data-value",e$=(e,t,r)=>{var a;return a=e,function e(t,r,a,n,l,s,o){if(s===r.length)return l===t.length?1:.99;var i=`${l},${s}`;if(void 0!==o[i])return o[i];for(var d,c,u,m,p=n.charAt(s),f=a.indexOf(p,l),h=0;f>=0;)(d=e(t,r,a,n,f+1,s+1,o))>h&&(f===l?d*=1:eE.test(t.charAt(f-1))?(d*=.8,(u=t.slice(l,f-1).match(eD))&&l>0&&(d*=Math.pow(.999,u.length))):eI.test(t.charAt(f-1))?(d*=.9,(m=t.slice(l,f-1).match(eM))&&l>0&&(d*=Math.pow(.999,m.length))):(d*=.17,l>0&&(d*=Math.pow(.999,f-l))),t.charAt(f)!==r.charAt(s)&&(d*=.9999)),(d<.1&&a.charAt(f-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&a.charAt(f-1)!==n.charAt(s))&&.1*(c=e(t,r,a,n,f+1,s+2,o))>d&&(d=.1*c),d>h&&(h=d),f=a.indexOf(p,f+1);return o[i]=h,h}(a=r&&r.length>0?`${a+" "+r.join(" ")}`:a,t,eP(a),eP(t),0,0,{})},eq=l.createContext(void 0),eG=l.createContext(void 0),eV=l.createContext(void 0),eB=l.forwardRef((e,t)=>{let r=e0(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=e0(()=>new Set),n=e0(()=>new Map),s=e0(()=>new Map),o=e0(()=>new Set),i=eJ(e),{label:d,children:c,value:u,onValueChange:m,filter:p,shouldFilter:f,loop:h,disablePointerSelection:x=!1,vimBindings:g=!0,...v}=e,b=(0,W.useId)(),w=(0,W.useId)(),j=(0,W.useId)(),y=l.useRef(null),N=e5();eQ(()=>{if(void 0!==u){let e=u.trim();r.current.value=e,k.emit()}},[u]),eQ(()=>{N(6,I)},[]);let k=l.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>r.current,setState:(e,t,a)=>{var n,l,s,o;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)D(),R(),N(1,E);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(j);e?e.focus():null==(n=document.getElementById(b))||n.focus()}if(N(7,()=>{var e;r.current.selectedItemId=null==(e=M())?void 0:e.id,k.emit()}),a||N(5,I),(null==(l=i.current)?void 0:l.value)!==void 0){null==(o=(s=i.current).onValueChange)||o.call(s,null!=t?t:"");return}}k.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),C=l.useMemo(()=>({value:(e,t,a)=>{var n;t!==(null==(n=s.current.get(e))?void 0:n.value)&&(s.current.set(e,{value:t,keywords:a}),r.current.filtered.items.set(e,S(t,a)),N(2,()=>{R(),k.emit()}))},item:(e,t)=>(a.current.add(e),t&&(n.current.has(t)?n.current.get(t).add(e):n.current.set(t,new Set([e]))),N(3,()=>{D(),R(),r.current.value||E(),k.emit()}),()=>{s.current.delete(e),a.current.delete(e),r.current.filtered.items.delete(e);let t=M();N(4,()=>{D(),(null==t?void 0:t.getAttribute("id"))===e&&E(),k.emit()})}),group:e=>(n.current.has(e)||n.current.set(e,new Set),()=>{s.current.delete(e),n.current.delete(e)}),filter:()=>i.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:b,inputId:j,labelId:w,listInnerRef:y}),[]);function S(e,t){var a,n;let l=null!=(n=null==(a=i.current)?void 0:a.filter)?n:e$;return e?l(e,r.current.search,t):0}function R(){if(!r.current.search||!1===i.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let a=n.current.get(r),l=0;a.forEach(t=>{l=Math.max(e.get(t),l)}),t.push([r,l])});let a=y.current;P().sort((t,r)=>{var a,n;let l=t.getAttribute("id"),s=r.getAttribute("id");return(null!=(a=e.get(s))?a:0)-(null!=(n=e.get(l))?n:0)}).forEach(e=>{let t=e.closest(ez);t?t.appendChild(e.parentElement===t?e:e.closest(`${ez} > *`)):a.appendChild(e.parentElement===a?e:e.closest(`${ez} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=y.current)?void 0:t.querySelector(`${e_}[${eL}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function E(){let e=P().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(eL);k.setState("value",t||void 0)}function D(){var e,t,l,o;if(!r.current.search||!1===i.current.shouldFilter){r.current.filtered.count=a.current.size;return}r.current.filtered.groups=new Set;let d=0;for(let n of a.current){let a=S(null!=(t=null==(e=s.current.get(n))?void 0:e.value)?t:"",null!=(o=null==(l=s.current.get(n))?void 0:l.keywords)?o:[]);r.current.filtered.items.set(n,a),a>0&&d++}for(let[e,t]of n.current)for(let a of t)if(r.current.filtered.items.get(a)>0){r.current.filtered.groups.add(e);break}r.current.filtered.count=d}function I(){var e,t,r;let a=M();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(r=null==(t=a.closest(e_))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function M(){var e;return null==(e=y.current)?void 0:e.querySelector(`${eO}[aria-selected="true"]`)}function P(){var e;return Array.from((null==(e=y.current)?void 0:e.querySelectorAll(eT))||[])}function A(e){let t=P()[e];t&&k.setState("value",t.getAttribute(eL))}function _(e){var t;let r=M(),a=P(),n=a.findIndex(e=>e===r),l=a[n+e];null!=(t=i.current)&&t.loop&&(l=n+e<0?a[a.length-1]:n+e===a.length?a[0]:a[n+e]),l&&k.setState("value",l.getAttribute(eL))}function z(e){let t=M(),r=null==t?void 0:t.closest(e_),a;for(;r&&!a;)a=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,e_):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,e_))?void 0:r.querySelector(eT);a?k.setState("value",a.getAttribute(eL)):_(e)}let O=()=>A(P().length-1),T=e=>{e.preventDefault(),e.metaKey?O():e.altKey?z(1):_(1)},F=e=>{e.preventDefault(),e.metaKey?A(0):e.altKey?z(-1):_(-1)};return l.createElement(Q.Primitive.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=v.onKeyDown)||t.call(v,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":g&&e.ctrlKey&&T(e);break;case"ArrowDown":T(e);break;case"p":case"k":g&&e.ctrlKey&&F(e);break;case"ArrowUp":F(e);break;case"Home":e.preventDefault(),A(0);break;case"End":e.preventDefault(),O();break;case"Enter":{e.preventDefault();let t=M();if(t){let e=new Event(eF);t.dispatchEvent(e)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:e6},d),e4(e,e=>l.createElement(eG.Provider,{value:k},l.createElement(eq.Provider,{value:C},e))))}),eU=l.forwardRef((e,t)=>{var r,a;let n=(0,W.useId)(),s=l.useRef(null),o=l.useContext(eV),i=l.useContext(eq),d=eJ(e),c=null!=(a=null==(r=d.current)?void 0:r.forceMount)?a:null==o?void 0:o.forceMount;eQ(()=>{if(!c)return i.item(n,null==o?void 0:o.id)},[c]);let u=e2(n,s,[e.value,e.children,s],e.keywords),m=l.useContext(eG),p=e1(e=>e.value&&e.value===u.current),f=e1(e=>!!c||!1===i.filter()||!e.search||e.filtered.items.get(n)>0);function h(){var e,t;x(),null==(t=(e=d.current).onSelect)||t.call(e,u.current)}function x(){m.setState("value",u.current,!0)}if(l.useEffect(()=>{let t=s.current;if(!(!t||e.disabled))return t.addEventListener(eF,h),()=>t.removeEventListener(eF,h)},[f,e.onSelect,e.disabled]),!f)return null;let{disabled:g,value:v,onSelect:b,forceMount:w,keywords:j,...y}=e;return l.createElement(Q.Primitive.div,{ref:(0,B.composeRefs)(s,t),...y,id:n,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!p,"data-disabled":!!g,"data-selected":!!p,onPointerMove:g||i.getDisablePointerSelection()?void 0:x,onClick:g?void 0:h},e.children)}),eX=l.forwardRef((e,t)=>{let{heading:r,children:a,forceMount:n,...s}=e,o=(0,W.useId)(),i=l.useRef(null),d=l.useRef(null),c=(0,W.useId)(),u=l.useContext(eq),m=e1(e=>!!n||!1===u.filter()||!e.search||e.filtered.groups.has(o));eQ(()=>u.group(o),[]),e2(o,i,[e.value,e.heading,d]);let p=l.useMemo(()=>({id:o,forceMount:n}),[n]);return l.createElement(Q.Primitive.div,{ref:(0,B.composeRefs)(i,t),...s,"cmdk-group":"",role:"presentation",hidden:!m||void 0},r&&l.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),e4(e,e=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},l.createElement(eV.Provider,{value:p},e))))}),eH=l.forwardRef((e,t)=>{let{alwaysRender:r,...a}=e,n=l.useRef(null),s=e1(e=>!e.search);return r||s?l.createElement(Q.Primitive.div,{ref:(0,B.composeRefs)(n,t),...a,"cmdk-separator":"",role:"separator"}):null}),eK=l.forwardRef((e,t)=>{let{onValueChange:r,...a}=e,n=null!=e.value,s=l.useContext(eG),o=e1(e=>e.search),i=e1(e=>e.selectedItemId),d=l.useContext(eq);return l.useEffect(()=>{null!=e.value&&s.setState("search",e.value)},[e.value]),l.createElement(Q.Primitive.input,{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":i,id:d.inputId,type:"text",value:n?e.value:o,onChange:e=>{n||s.setState("search",e.target.value),null==r||r(e.target.value)}})}),eW=l.forwardRef((e,t)=>{let{children:r,label:a="Suggestions",...n}=e,s=l.useRef(null),o=l.useRef(null),i=e1(e=>e.selectedItemId),d=l.useContext(eq);return l.useEffect(()=>{if(o.current&&s.current){let e=o.current,t=s.current,r,a=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return a.observe(e),()=>{cancelAnimationFrame(r),a.unobserve(e)}}},[]),l.createElement(Q.Primitive.div,{ref:(0,B.composeRefs)(s,t),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":a,id:d.listId},e4(e,e=>l.createElement("div",{ref:(0,B.composeRefs)(o,d.listInnerRef),"cmdk-list-sizer":""},e)))}),eY=l.forwardRef((e,t)=>{let{open:r,onOpenChange:a,overlayClassName:n,contentClassName:s,container:o,...i}=e;return l.createElement(eA.Root,{open:r,onOpenChange:a},l.createElement(eA.Portal,{container:o},l.createElement(eA.Overlay,{"cmdk-overlay":"",className:n}),l.createElement(eA.Content,{"aria-label":e.label,"cmdk-dialog":"",className:s},l.createElement(eB,{ref:t,...i}))))}),eZ=Object.assign(eB,{List:eW,Item:eU,Input:eK,Group:eX,Separator:eH,Dialog:eY,Empty:l.forwardRef((e,t)=>e1(e=>0===e.filtered.count)?l.createElement(Q.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:l.forwardRef((e,t)=>{let{progress:r,children:a,label:n="Loading...",...s}=e;return l.createElement(Q.Primitive.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},e4(e,e=>l.createElement("div",{"aria-hidden":!0},e)))})});function eJ(e){let t=l.useRef(e);return eQ(()=>{t.current=e}),t}var eQ="u"<typeof window?l.useEffect:l.useLayoutEffect;function e0(e){let t=l.useRef();return void 0===t.current&&(t.current=e()),t}function e1(e){let t=l.useContext(eG),r=()=>e(t.snapshot());return l.useSyncExternalStore(t.subscribe,r,r)}function e2(e,t,r,a=[]){let n=l.useRef(),s=l.useContext(eq);return eQ(()=>{var l;let o=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():n.current}})(),i=a.map(e=>e.trim());s.value(e,o,i),null==(l=t.current)||l.setAttribute(eL,o),n.current=o}),n}var e5=()=>{let[e,t]=l.useState(),r=e0(()=>new Map);return eQ(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,a)=>{r.current.set(e,a),t({})}};function e4({asChild:e,children:t},r){let a;return e&&l.isValidElement(t)?l.cloneElement("function"==typeof(a=t.type)?a(t.props):"render"in a?a.render(t.props):t,{ref:t.ref},r(t.props.children)):r(t)}var e6={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};e.i(95926);let e9=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eZ,{ref:r,className:(0,N.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));e9.displayName=eZ.displayName;let e8=l.forwardRef(({className:e,...t},r)=>(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(s.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(eZ.Input,{ref:r,className:(0,N.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));e8.displayName=eZ.Input.displayName;let e3=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eZ.List,{ref:r,className:(0,N.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));e3.displayName=eZ.List.displayName;let e7=l.forwardRef((e,t)=>(0,n.jsx)(eZ.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));e7.displayName=eZ.Empty.displayName;let te=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eZ.Group,{ref:r,className:(0,N.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));te.displayName=eZ.Group.displayName,l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eZ.Separator,{ref:r,className:(0,N.cn)("-mx-1 h-px bg-border",e),...t})).displayName=eZ.Separator.displayName;let tt=l.forwardRef(({className:e,...t},r)=>(0,n.jsx)(eZ.Item,{ref:r,className:(0,N.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t}));tt.displayName=eZ.Item.displayName;var tr=e.i(8562),ta=e.i(22016),tn=e.i(7233);function tl({mode:e,onModeChange:t,selectedDate:r,onDateChange:a,selectedEventId:o,onEventChange:d,events:c,venues:u,selectedVenue:p,onVenueChange:f}){let h=(0,i.useTranslations)("GuestList"),[x,g]=l.useState(!1),[b,j]=l.useState(!1),[y,k]=l.useState(""),C=c.find(e=>e.id===o),S=l.useMemo(()=>{if(!y.trim())return c;let e=y.toLowerCase();return c.filter(t=>t.name.toLowerCase().includes(e))},[y,c]);return(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("div",{className:"bg-muted/40 p-1 rounded-xl w-fit",children:(0,n.jsx)("div",{className:"bg-background rounded-lg shadow-sm border p-1",children:(0,n.jsxs)(tr.ToggleGroup,{type:"single",value:e,onValueChange:e=>{e&&t(e)},children:[(0,n.jsxs)(tr.ToggleGroupItem,{value:"venue","aria-label":"Toggle venue",className:"gap-2 px-3 data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:[(0,n.jsx)(q,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Venue Date"})]}),(0,n.jsxs)(tr.ToggleGroupItem,{value:"event","aria-label":"Toggle event",className:"gap-2 px-3 data-[state=on]:bg-primary data-[state=on]:text-primary-foreground",children:[(0,n.jsx)(m.Ticket,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Event"})]})]})})}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(ta.default,{href:"/guest-list/invite",children:(0,n.jsxs)(v.Button,{className:"bg-primary hover:bg-primary/90 text-primary-foreground gap-2 shadow-lg shadow-primary/20 rounded-xl px-6",children:[(0,n.jsx)(tn.Plus,{className:"w-4 h-4"}),h("addGuest")]})}),"venue"===e?(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(eu,{children:[(0,n.jsx)(ef,{asChild:!0,children:(0,n.jsxs)(v.Button,{variant:"outline",className:(0,N.cn)("w-[200px] justify-start text-left font-normal border-border bg-background hover:bg-accent/50",!r&&"text-muted-foreground"),children:[(0,n.jsx)(L.Calendar,{className:"mr-2 h-4 w-4"}),r?(0,F.format)(r,"PPP"):(0,n.jsx)("span",{children:"Pick a date"})]})}),(0,n.jsx)(eR,{className:"w-auto p-0",align:"start",children:(0,n.jsx)(G.Calendar,{mode:"single",selected:r,onSelect:a,initialFocus:!0})})]}),(0,n.jsxs)(eu,{open:b,onOpenChange:j,children:[(0,n.jsx)(ef,{asChild:!0,children:(0,n.jsxs)(v.Button,{variant:"outline",role:"combobox","aria-expanded":b,className:"w-[200px] justify-between border-border bg-background hover:bg-accent/50",children:[p?(0,n.jsx)("span",{className:"truncate",children:p.name}):"Select venue...",(0,n.jsx)($,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)(eR,{className:"w-[200px] p-0",children:(0,n.jsxs)(e9,{children:[(0,n.jsx)(e8,{placeholder:"Search venue..."}),(0,n.jsxs)(e3,{children:[(0,n.jsx)(e7,{children:"No venue found."}),(0,n.jsx)(te,{children:u.map(e=>(0,n.jsxs)(tt,{value:e.name,onSelect:()=>{f(e),j(!1)},children:[(0,n.jsx)(w.default,{className:(0,N.cn)("mr-2 h-4 w-4",p?.id===e.id?"opacity-100":"opacity-0")}),e.name]},e.id))})]})]})})]})]}):(0,n.jsxs)(eu,{open:x,onOpenChange:g,children:[(0,n.jsx)(ef,{asChild:!0,children:(0,n.jsxs)(v.Button,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-[240px] justify-between border-border bg-background hover:bg-accent/50",children:[C?(0,n.jsxs)("div",{className:"flex flex-col items-start truncate",children:[(0,n.jsx)("span",{className:"font-medium truncate",children:C.name}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,F.format)(new Date(C.start_time),"PPP p")})]}):h("selectEvent"),(0,n.jsx)($,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)(eR,{className:"w-[240px] p-0",children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center border-b px-3",children:[(0,n.jsx)(s.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)("input",{className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground",placeholder:h("searchEvent"),value:y,onChange:e=>k(e.target.value)})]}),(0,n.jsx)("div",{className:"max-h-[300px] overflow-y-auto p-1",children:0===S.length?(0,n.jsx)("p",{className:"py-6 text-center text-sm text-muted-foreground",children:h("noEventFound")}):S.map(e=>(0,n.jsxs)("div",{className:"relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",onClick:()=>{d(e.id),g(!1),k("")},children:[(0,n.jsx)(w.default,{className:(0,N.cn)("mr-2 h-4 w-4",o===e.id?"opacity-100":"opacity-0")}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,F.format)(new Date(e.start_time),"PPP")})]})]},e.id))})]})})]})]})]})}var ts=e.i(73328),to=e.i(72807),ti=e.i(68006),td=e.i(30909);let tc=(0,j.default)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var tu=e.i(16715);function tm(){let e=(0,i.useTranslations)("GuestList"),[t,r]=(0,l.useState)("requests"),{guests:a,stats:s,isLoading:o,mode:c,setMode:u,selectedDate:m,setSelectedDate:p,selectedEventId:x,setSelectedEventId:g,events:b,approveRequest:w,denyRequest:j,cancelRequest:y,refreshData:k,venues:C,selectedVenue:S,selectVenue:R,loadMore:E,hasMore:D,isLoadingMore:I,statusFilter:M,setStatusFilter:P}=function(){let e,t=(0,ts.useDependency)(e=>e.guestListRepository),{selectedVenue:r,venues:a,selectVenue:n,events:s}=(0,to.useCrm)(),[o,i]=(0,l.useState)("venue"),[d,c]=(0,l.useState)(((e=new Date).setHours(0,0,0,0),e)),[u,m]=(0,l.useState)(void 0),[p,f]=(0,l.useState)("all"),h=(0,l.useMemo)(()=>s?s.map(e=>({id:e.id,name:e.title||"Untitled Event",start_time:e.starts_at})).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()):[],[s]),x=(0,l.useCallback)((e,t,r,a,n)=>`guestlist-${e}-${t}-${r?.getTime()}-${a}-${n}`,[]),g=r?x(r.id,o,d,u,p):null,v=g?ti.dataCache.get(g):null,[b,w]=(0,l.useState)(v?.guests||[]),[j,y]=(0,l.useState)(v?.stats||null),[N,k]=(0,l.useState)(!v&&!!r),[C,S]=(0,l.useState)(!1),[R,E]=(0,l.useState)(0),[D,I]=(0,l.useState)(!0),M=(0,l.useCallback)(async(e=!0)=>{if(!r)return void k(!1);let a=x(r.id,o,d,u,p),n=ti.dataCache.get(a);if(n&&0===R){w(n.guests),y(n.stats),k(!1),I(n.guests.length>=20);return}try{e&&k(!0);let[n,l]=await Promise.all([t.getGuestRequests(r.id,"event"===o&&u||null,"venue"===o&&d||null,p,20,20*R),t.getStats(r.id,"event"===o&&u||null,"venue"===o&&d||null)]);0===R?(w(n),ti.dataCache.set(a,{guests:n,stats:l})):w(e=>[...e,...n]),y(l),I(20===n.length)}catch(e){console.error("Failed to load guest list data",e)}finally{k(!1),S(!1)}},[t,r,o,d,u,p,x,R]);(0,l.useEffect)(()=>{E(0)},[r,o,d,u,p]),(0,l.useEffect)(()=>{M(0===R)},[M,R]);let P=(0,l.useCallback)(()=>{N||C||!D||(S(!0),E(e=>e+1))},[N,C,D]),A=(0,l.useCallback)(()=>{if(r){let e=x(r.id,o,d,u,p);ti.dataCache.clear(e),M(!0)}},[M,r,o,d,u,p,x]);return{guests:b,stats:j,isLoading:N,mode:o,setMode:i,selectedDate:d,setSelectedDate:c,selectedEventId:u,setSelectedEventId:m,events:h,approveRequest:async e=>{try{await t.approveGuestRequest(e),await A()}catch(e){console.error("Failed to approve request",e)}},denyRequest:async e=>{try{await t.denyGuestRequest(e),await A()}catch(e){console.error("Failed to deny request",e)}},cancelRequest:async e=>{try{await t.cancelGuestRequest(e),await A()}catch(e){console.error("Failed to cancel request",e)}},refreshData:A,loadMore:P,hasMore:D,isLoadingMore:C,statusFilter:p,setStatusFilter:f,venues:a,selectedVenue:r,selectVenue:n}}(),A=e=>{r(e),"requests"===e?P("pending"):P("all")};return(0,n.jsx)(td.SidebarInset,{children:(0,n.jsxs)("div",{className:"flex flex-col h-full bg-[#f8f9fa] dark:bg-zinc-950/50 min-h-screen",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 p-4 lg:hidden border-b border-border",children:[(0,n.jsx)(td.SidebarTrigger,{}),(0,n.jsx)("h1",{className:"text-lg font-bold",children:e("title")})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto p-8 max-w-[1600px] mx-auto w-full space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-start gap-8",children:[(0,n.jsx)(d,{}),(0,n.jsx)(tl,{mode:c,onModeChange:u,selectedDate:m,onDateChange:p,selectedEventId:x,onEventChange:g,events:b,venues:C,selectedVenue:S,onVenueChange:R})]}),(0,n.jsx)(h,{stats:s,isLoading:o}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 bg-white/60 dark:bg-zinc-900/60 backdrop-blur-sm p-1.5 rounded-2xl border border-border/50 shadow-sm",children:[(0,n.jsxs)("button",{onClick:()=>A("guests"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all duration-200 ${"guests"===t?"bg-primary text-primary-foreground shadow-md shadow-primary/20":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:[(0,n.jsx)(f.Users,{className:"w-4 h-4"}),e("guestsTab")]}),(0,n.jsxs)("button",{onClick:()=>A("requests"),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-bold transition-all duration-200 ${"requests"===t?"bg-primary text-primary-foreground shadow-md shadow-primary/20":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:[(0,n.jsx)(tc,{className:"w-4 h-4"}),e("requestsTab")]})]}),(0,n.jsx)(v.Button,{variant:"outline",size:"icon",onClick:k,className:"h-10 w-10 rounded-xl border-border/50 bg-white/60 dark:bg-zinc-900/60 backdrop-blur-sm hover:bg-muted/50",children:(0,n.jsx)(tu.RefreshCw,{className:"h-4 w-4 text-muted-foreground"})}),(0,n.jsxs)(eu,{children:[(0,n.jsx)(ef,{asChild:!0,children:(0,n.jsxs)(v.Button,{variant:"outline",className:"h-10 justify-between gap-2 border-border/50 bg-white/60 dark:bg-zinc-900/60 backdrop-blur-sm hover:bg-muted/50 rounded-xl capitalize px-4",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:"all"===M?"All Status":M.replace(/_/g," ")}),(0,n.jsx)($,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),(0,n.jsx)(eR,{className:"w-[160px] p-1 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl border-border/50 rounded-xl shadow-lg",align:"end",children:["all","pending","approved","used","no_show","cancelled"].map(e=>(0,n.jsx)(v.Button,{variant:"ghost",className:(0,N.cn)("w-full justify-start font-medium capitalize rounded-lg h-9",M===e&&"bg-primary/10 text-primary"),onClick:()=>P(e),children:e.replace(/_/g," ")},e))})]})]}),(0,n.jsx)(T,{guests:a,isLoading:o,onApprove:w,onDeny:j,onCancel:y,showActions:"requests"===t,emptyTitle:e("guests"===t?"noGuests":"noRequests"),emptyDescription:e("guests"===t?"noGuestsDesc":"noRequestsDesc")}),D&&(0,n.jsx)("div",{className:"flex justify-center pt-4",children:(0,n.jsx)(v.Button,{variant:"outline",onClick:E,disabled:I,className:"rounded-2xl px-10 h-12 bg-white/60 dark:bg-zinc-900/60 backdrop-blur-sm border-white/10 hover:bg-white/10 font-bold transition-all",children:I?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tu.RefreshCw,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):"Load More"})})]})]})})}e.s(["default",()=>tm],12459)}]);